var FireSkillAction = function() {
  
    var skillImg = [];
    var skillCnt = 0;
    var endCnt = 0;
    var isSkill = false;
    var posX, posY;
    var index = 0;
    var posXArr = [-300, -200, -100, 100, -200, 200, 0, 100, 400, -100,
                   -200, 500, 400, 300, 200, -400, -300, -200, 200, -300, 
                   300, 100, 200, 500, -200, -300, 600, 500, 400, 300,
                  -100, 0, -300, 200, -400, 300, 100, 0, 100, -300,
                   -200, 200, 500, 600, 600, -300, -200, 0, 600, -200, 
                   600, 200, 400, 200, -100, -400, 700, 600, 400, 300, 
                   800, 850, 900, 950, 800, 900, 850, 700, 800, 900,
                   
                  -400, -300, -200, 0, -300, 100, -100, 0, 300, 0,
                   -300, 400, 300, 200, 100, -500, -400, -300, 100, -400, 
                   200, 0, 100, 400, -300, -400, 500, 400, 300, 200,
                  0, -100, -400, 100, -300, 200, 0, -100, 0, -400,
                   -300, 100, 400, 500, 500, -400, -300, -100, 500, -100, 
                   500, 100, 300, 100, 0, -500, 600, 500, 300, 200, 
                   700, 750, 800, 850, 700, 800, 750, 600, 700, 800,
                  
                  -300, -200, -100, 100, -200, 200, 0, 100, 400, -100,
                   -200, 500, 400, 300, 200, -400, -300, -200, 200, -300, 
                   300, 100, 200, 500, -200, -300, 600, 500, 400, 300,
                  -100, 0, -300, 200, -400, 300, 100, 0, 100, -300,
                   -200, 200, 500, 600, 600, -300, -200, 0, 600, -200, 
                   600, 200, 400, 200, -100, -400, 700, 600, 400, 300, 
                   800, 850, 900, 950, 800, 900, 850, 700, 800, 900,
                   
                  -400, -300, -200, 0, -300, 100, -100, 0, 300, 0,
                   -300, 400, 300, 200, 100, -500, -400, -300, 100, -400, 
                   200, 0, 100, 400, -300, -400, 500, 400, 300, 200,
                  0, -100, -400, 100, -300, 200, 0, -100, 0, -400,
                   -300, 100, 400, 500, 500, -400, -300, -100, 500, -100, 
                   500, 100, 300, 100, 0, -500, 600, 500, 300, 200, 
                   700, 750, 800, 850, 700, 800, 750, 600, 700, 800];
    
    var posYArr = [-100, -200, -50, 0, -300, -200, -300, -50, -100, -50, 
                   -400, 0, -50, -400, -200, 0, -100, 50, -100, -200, 
                   -100, -200, 50, 0, 50, -300, 100, 50, -300, -100,
                  -200, -300, -500, 0, -400, -300, -500, -150, -200, -250, 
                   -500, 0, -150, -200, -300, 0, -300, -500, -200, -100, 
                   -150, -250, 500, 100, 50, -350, 150, 50, -350, -150,
                  0, -100, -150, -250, -200, 0, -100, -50, 0, -150,
                  
                  100, 0, 150, 200, -100, 0, -100, 150, 100, 150, 
                   -200, 200, 150, -200, 0, 200, 100, 250, 100, 0, 
                   100, 0, 250, 200, 250, -100, 300, 250, -100, 100,
                  0, -100, -300, 200, -200, -100, -300, 50, 0, -50, 
                   -300, 200, 50, 0, -100, 200, -100, -300, 0, 100, 
                   50, -50, 700, 300, 250, -150, 350, 250, -150, 50,
                  200, 100, 50, -50, 0, 200, 100, -50, 200, 50,
                  
                  -100, -200, -50, 0, -300, -200, -300, -50, -100, -50, 
                   -400, 0, -50, -400, -200, 0, -100, 50, -100, -200, 
                   -100, -200, 50, 0, 50, -300, 100, 50, -300, -100,
                  -200, -300, -500, 0, -400, -300, -500, -150, -200, -250, 
                   -500, 0, -150, -200, -300, 0, -300, -500, -200, -100, 
                   -150, -250, 500, 100, 50, -350, 150, 50, -350, -150,
                  0, -100, -150, -250, -200, 0, -100, -50, 0, -150,
                  
                  100, 0, 150, 200, -100, 0, -100, 150, 100, 150, 
                   -200, 200, 150, -200, 0, 200, 100, 250, 100, 0, 
                   100, 0, 250, 200, 250, -100, 300, 250, -100, 100,
                  0, -100, -300, 200, -200, -100, -300, 50, 0, -50, 
                   -300, 200, 50, 0, -100, 200, -100, -300, 0, 100, 
                   50, -50, 700, 300, 250, -150, 350, 250, -150, 50,
                  200, 100, 50, -50, 0, 200, 100, -50, 200, 50];
    
    var endPosArr = [100, 200, 100, 300, 400, 200, 100, 200, 100, 400, 
                     300, 400, 100, 200, 200, 100, 400, 200, 300, 500, 
                     200, 200, 300, 100, 500, 100, 200, 300, 100, 400,
                    200, 300, 400, 200, 300, 250, 150, 250, 150, 500, 
                     200, 300, 400, 250, 300, 150, 500, 300, 200, 400, 
                     250, 100, 350, 150, 200, 300, 250, 350, 150, 300,
                    900, 800, 600, 700, 750, 800, 900, 950, 850, 800,
                    
                    1000, 1200, 1100, 1300, 1200, 1200, 1100, 1200, 1100, 1200, 
                     1300, 1200, 1100, 1200, 1200, 1100, 1100, 1200, 1300, 1100, 
                     1200, 1200, 1300, 1100, 1500, 1100, 1200, 1300, 1100, 1100,
                    1200, 1300, 1100, 1200, 1300, 1250, 1150, 1250, 1150, 1200, 
                     1200, 1300, 1200, 1250, 1300, 1150, 1300, 1300, 1200, 1200, 
                     1250, 1100, 1350, 1150, 1200, 1300, 1250, 1350, 1150, 1100,
                    1200, 1100, 900, 800, 750, 800, 900, 950, 850, 800,
                     
                    100, 200, 100, 300, 400, 200, 100, 200, 100, 400, 
                     300, 400, 100, 200, 200, 100, 400, 200, 300, 500, 
                     200, 200, 300, 100, 500, 100, 200, 300, 100, 400,
                    200, 300, 400, 200, 300, 250, 150, 250, 150, 500, 
                     200, 300, 400, 250, 300, 150, 500, 300, 200, 400, 
                     250, 100, 350, 150, 200, 300, 250, 350, 150, 300,
                    900, 800, 600, 700, 750, 800, 900, 950, 850, 800,
                    
                    1000, 1200, 1100, 1300, 1200, 1200, 1100, 1200, 1100, 1200, 
                     1300, 1200, 1100, 1200, 1200, 1100, 1100, 1200, 1300, 1100, 
                     1200, 1200, 1300, 1100, 1500, 1100, 1200, 1300, 1100, 1100,
                    1200, 1300, 1100, 1200, 1300, 1250, 1150, 1250, 1150, 1200, 
                     1200, 1300, 1200, 1250, 1300, 1150, 1300, 1300, 1200, 1200, 
                     1250, 1100, 1350, 1150, 1200, 1300, 1250, 1350, 1150, 1100,
                    1200, 1100, 900, 800, 750, 800, 900, 950, 850, 800];
    
    this.setSkill = function(idx) {
        
        if (idx < 140) {
            posX = posXArr[idx] - SCREEN_WIDTH / 2;
        } else {
            posX = posXArr[idx] + SCREEN_WIDTH / 2;
        }
        
        posY = posYArr[idx];
        
        index = idx;
        skillCnt = 0;
        endCnt = 0;
        isSkill = true;
    };
    
    this.getIsSkill = function() {
        return isSkill;
    };
    
    this.setResource = function() {
        skillImg = [];
        for (var i = 0; i < 6; i++) {
            skillImg[i] = PlayResManager.getEtcMap().get("wepn_15_move_" + i);
        }
    };
    
    this.render = function(g, callback) {
        
        if (!isSkill) return;
        
        skillCnt++;
        
        if (posY < endPosArr[index]) {
            posX+=20;
            posY+=20;
            g.drawImage(skillImg[skillCnt % 4], posX, posY);
        } else if (posY >= endPosArr[index]) {
            g.drawImage(skillImg[endCnt + 3], posX, posY);
            if (endCnt < 2) {
                endCnt++;
            } else {
                isSkill = false;
                if (callback) callback();
            }
        }
    };
    
    this.clear = function() {
        skillImg = null;
        posXArr = null;
        posYArr = null;
    };
};